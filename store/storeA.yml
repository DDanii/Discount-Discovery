name: Aldi
steps:
  - stepParameters: 
      method: Literal
      data: "2"
      destination: two
  - stepParameters: 
      method: Literal
      data: div.item:has( sup)
      destination: divSup
  - stepParameters: 
      method: Literal
      data: h3:not(:has(> font))
      destination: h3
  - stepParameters: 
      method: Literal
      data: h2>b
      destination: b
  - stepParameters: 
      method: Literal
      data: "h2:has(a[id])"
      destination: a
  - stepParameters: 
      method: Literal
      data: img
      destination: img
  - stepParameters: 
      method: Literal
      data: sup
      destination: sup
  - stepParameters: 
      method: Literal
      data: ".E05-basic-text, .E12-grid-gallery"
      destination: e05e12
  - stepParameters:
      method: Literal
      data: https://www.aldi.hu/hu/ajanlatok/szuper-akciok-mindennap.html
  - stepParameters: 
      method: Fetch
  - stepParameters: 
      method: ParseHTML
  - stepParameters: 
      method: HTMLQuerySelector
      selector: e05e12
      all: true
  - stepParameters:
      method: SetProp
      destination: blocks
  - stepParameters:
        method: ForEach
        source: blocks
        steps:
          - stepParameters: 
              method: ToString
          - stepParameters: 
              method: SetProp
              destination: blockStr
          - stepParameters: 
              method: DeepCopy
          - stepParameters: 
              method: ParseHTML
          - stepParameters: 
              method: HTMLQuerySelector
              selector: a
              all: true
          - stepParameters: 
              method: SetProp
              destination: blockForDate
          - stepParameters:
              method: ForEach
              source: blockForDate
              steps:
                - stepParameters: 
                    method: SetProp
                    sourceProp: text
                - stepParameters: 
                    method: Split
                    separator: " 2"
                - stepParameters: 
                    method: Spread
                    first: dateArray
                - stepParameters: 
                    method: SetProp
                    destination: dateArray
                - stepParameters: 
                    method: DeepCopy
                - stepParameters: 
                    method: SetProp
                    sourceProp: 1
                - stepParameters: 
                    method: Split
                    separator: "-"
                - stepParameters: 
                    method: SetProp
                    sourceProp: 0
                    destination: dateStart
                - stepParameters: 
                    method: Concat
                    first: two
                    second: dateStart
                - stepParameters: 
                    method: SetProp
                    destination: dateStart
                - stepParameters:
                    method: SetProp
                    sourceProp: 2
                    source: dateArray
                - stepParameters: 
                    method: Split
                    separator: "-"
                - stepParameters:
                    method: SetProp
                    sourceProp: 0
                    destination: dateEnd
                - stepParameters: 
                    method: Concat
                    first: two
                    second: dateEnd
                - stepParameters: 
                    method: SetProp
                    destination: dateEnd
          - stepParameters:
              method: SetProp
              source: blockStr
          - stepParameters:
              method: ParseHTML
          - stepParameters: 
              method: HTMLQuerySelector
              all: true
              selector: divSup
          - stepParameters: 
              method: SetProp
              destination: products
          - stepParameters: 
              method: ForEach
              source: products
              steps:
                - stepParameters: 
                    method: ToString
                - stepParameters: 
                    method: SetProp
                    destination: productStr
                - stepParameters: 
                    method: DeepCopy
                - stepParameters: 
                    method: ParseHTML
                - stepParameters: 
                    method: HTMLQuerySelector
                    selector: img
                - stepParameters: 
                    method: SetProp
                    sourceProp: attrs
                - stepParameters: 
                    method: SetProp
                    sourceProp: data-src
                    destination: product
                    destinationProp: image

                - stepParameters: 
                    method: SetProp
                    source: dateStart
                    destination: product
                    destinationProp: startDate

                - stepParameters: 
                    method: SetProp
                    source: dateEnd
                    destination: product
                    destinationProp: endDate

                - stepParameters: 
                    method: SetProp
                    source: productStr
                - stepParameters: 
                    method: DeepCopy
                - stepParameters: 
                    method: ParseHTML
                - stepParameters: 
                    method: HTMLQuerySelector
                    selector: h3
                - stepParameters: 
                    method: SetProp
                    sourceProp: text
                    destination: product
                    destinationProp: name

                - stepParameters: 
                    method: SetProp
                    source: productStr
                - stepParameters: 
                    method: DeepCopy
                - stepParameters: 
                    method: ParseHTML
                - stepParameters: 
                    method: HTMLQuerySelector
                    selector: sup
                - stepParameters: 
                    method: SetProp
                    sourceProp: text
                    destination: product
                    destinationProp: externalId

                - stepParameters: 
                    method: SetProp
                    source: productStr
                - stepParameters: 
                    method: DeepCopy
                - stepParameters: 
                    method: ParseHTML
                - stepParameters: 
                    method: HTMLQuerySelector
                    selector: b
                - stepParameters: 
                    method: SetProp
                    sourceProp: text
                - stepParameters: 
                    method: Split
                    separator: Ft
                - stepParameters: 
                    method: SetProp
                    sourceProp: 0
                - stepParameters: 
                    method: Replace
                    all: true
                    searchValue: " "
                    newValue: ""
                - stepParameters: 
                    method: Replace
                    all: true
                    searchValue: "Â "
                    newValue: ""
                - stepParameters: 
                    method: ParseJSON
                - stepParameters: 
                    method: SetProp
                    destination: product
                    destinationProp: price

                - stepParameters: 
                    method: PushToArray
                    array: DDParsedProducts
                    data: product